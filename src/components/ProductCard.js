import React, {useState} from 'react';
import BasketButtons from "./BasketButtons";

const ProductCard = ({product, addToCart, removeFromCart, cart}) => {
    const [isCartButtonExpended, setIsCartButtonepended] = useState(false);
    const {id, name, price_per_unit: price, unit_name} = product;
    const {count} = (cart && cart.filter(item => item.id === id)[0]) || {count: 0};

    return (
        <div className="w-full flex flex-col rounded-md bg-black-dark">
            <div className="flex flex-row w-full items-center justify-between p-4">
                <div>
                    <div className="font-bold text-lg">
                        {name}
                    </div>
                    <div className="flex flex-row items-end">
                        <div className="text-md font-medium mr-1">{price} FCFA</div>
                        <div className="text-xs">/{unit_name}</div>
                    </div>
                </div>
                <div className="w-16 h-16 rounded bg-center bg-repeat bg-cover"
                     style={{backgroundImage: "url('https://source.unsplash.com/random/800x600')"}}/>
            </div>

            {isCartButtonExpended ?
                <div className="w-full flex items-center justify-between rounded bg-black-lightest py-2 px-3">
                    <div className="flex flex-row items-center">
                        <div className="w-6 h-6 flex items-center justify-center">
                            <svg className="fill-current" width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14.5487 10.9266C14.5469 10.4434 14.4002 9.97195 14.1276 9.57307C13.855 9.17419 13.469 8.86627 13.0195 8.68912L14.5245 3.05522C14.556 2.93524 14.5593 2.80961 14.5341 2.68814C14.509 2.56668 14.4561 2.45267 14.3797 2.35501C14.3015 2.2635 14.2038 2.1907 14.0937 2.14194C13.9837 2.09319 13.8641 2.06974 13.7438 2.07331H2.7175L2.4519 1.05921C2.40573 0.887711 2.30412 0.736299 2.16291 0.628571C2.0217 0.520844 1.84882 0.462851 1.67121 0.463631H0.0615234V2.07331H1.05148L3.04749 9.52615C3.09465 9.70174 3.19988 9.85618 3.34602 9.96433C3.49217 10.0725 3.67063 10.128 3.85233 10.1217H12.1342C12.3476 10.1217 12.5523 10.2065 12.7033 10.3575C12.8542 10.5084 12.939 10.7131 12.939 10.9266C12.939 11.14 12.8542 11.3447 12.7033 11.4957C12.5523 11.6466 12.3476 11.7314 12.1342 11.7314H1.67121C1.45775 11.7314 1.25304 11.8162 1.1021 11.9672C0.951161 12.1181 0.866365 12.3228 0.866365 12.5363C0.866365 12.7497 0.951161 12.9544 1.1021 13.1054C1.25304 13.2563 1.45775 13.3411 1.67121 13.3411H2.62092C2.48855 13.7058 2.44602 14.097 2.49692 14.4817C2.54782 14.8663 2.69066 15.233 2.91333 15.5507C3.13601 15.8684 3.43197 16.1278 3.77615 16.3068C4.12033 16.4859 4.5026 16.5794 4.89058 16.5794C5.27855 16.5794 5.66082 16.4859 6.005 16.3068C6.34918 16.1278 6.64514 15.8684 6.86782 15.5507C7.09049 15.233 7.23333 14.8663 7.28423 14.4817C7.33513 14.097 7.2926 13.7058 7.16023 13.3411H9.05966C8.93916 13.6732 8.893 14.0277 8.92444 14.3795C8.95587 14.7314 9.06413 15.0721 9.24159 15.3775C9.41904 15.683 9.66136 15.9458 9.95145 16.1474C10.2415 16.349 10.5723 16.4845 10.9205 16.5443C11.2687 16.6042 11.6257 16.5868 11.9665 16.4936C12.3072 16.4004 12.6234 16.2336 12.8926 16.0049C13.1618 15.7762 13.3776 15.4911 13.5247 15.17C13.6718 14.8488 13.7466 14.4992 13.7438 14.1459C13.7423 13.7301 13.6313 13.3221 13.4219 12.9628C13.7661 12.7458 14.0498 12.4454 14.2468 12.0894C14.4438 11.7334 14.5476 11.3334 14.5487 10.9266ZM11.4017 8.51205H4.48815L3.15212 3.683H12.6975L11.4017 8.51205ZM4.89058 14.9508C4.73139 14.9508 4.57578 14.9036 4.44343 14.8151C4.31107 14.7267 4.20791 14.601 4.147 14.4539C4.08608 14.3069 4.07014 14.1451 4.1012 13.9889C4.13225 13.8328 4.20891 13.6894 4.32147 13.5768C4.43403 13.4643 4.57743 13.3876 4.73356 13.3566C4.88968 13.3255 5.05151 13.3415 5.19858 13.4024C5.34564 13.4633 5.47134 13.5664 5.55978 13.6988C5.64821 13.8312 5.69542 13.9868 5.69542 14.1459C5.69542 14.3594 5.61062 14.5641 5.45968 14.7151C5.30875 14.866 5.10403 14.9508 4.89058 14.9508ZM11.3293 14.9508C11.1701 14.9508 11.0145 14.9036 10.8822 14.8151C10.7498 14.7267 10.6467 14.601 10.5857 14.4539C10.5248 14.3069 10.5089 14.1451 10.5399 13.9889C10.571 13.8328 10.6476 13.6894 10.7602 13.5768C10.8728 13.4643 11.0162 13.3876 11.1723 13.3566C11.3284 13.3255 11.4902 13.3415 11.6373 13.4024C11.7844 13.4633 11.9101 13.5664 11.9985 13.6988C12.087 13.8312 12.1342 13.9868 12.1342 14.1459C12.1342 14.3594 12.0494 14.5641 11.8984 14.7151C11.7475 14.866 11.5428 14.9508 11.3293 14.9508Z" fill="white"/>
                            </svg>
                        </div>
                        <div>
                            <span className="pr-1 text-3xl font-bold">{count}</span>
                            <span className="text-xs">{unit_name}</span>
                        </div>
                    </div>
                    <div className="flex flex-row items-center">
                        <BasketButtons type="remove" classnames="bg-black-dark text-blue-light mr-2" handleClick={() => removeFromCart(id)}/>
                        <BasketButtons type="add" classnames="bg-blue text-black-dark" handleClick={() => addToCart(id, name, price)}/>
                    </div>
                </div>
                :
                <div className="w-full flex items-center justify-center rounded py-2 bg-black-lightest"
                     onClick={() => setIsCartButtonepended(true)}>
                    <svg className="fill-current" width="29" height="29" viewBox="0 0 29 29"  xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.541 19.5139C21.5388 18.9136 21.3566 18.3278 21.0178 17.8322C20.6791 17.3366 20.1995 16.954 19.641 16.7339L21.511 9.73393C21.5501 9.58485 21.5542 9.42876 21.5229 9.27784C21.4917 9.12692 21.426 8.98526 21.331 8.86393C21.2339 8.75023 21.1125 8.65977 20.9758 8.5992C20.8391 8.53862 20.6905 8.50949 20.541 8.51393H6.84102L6.51102 7.25393C6.45364 7.04084 6.32739 6.85271 6.15194 6.71886C5.97649 6.58501 5.76169 6.51296 5.54102 6.51393H3.54102V8.51393H4.77102L7.25102 17.7739C7.30962 17.9921 7.44035 18.184 7.62194 18.3184C7.80352 18.4527 8.02525 18.5217 8.25102 18.5139H18.541C18.8062 18.5139 19.0606 18.6193 19.2481 18.8068C19.4357 18.9944 19.541 19.2487 19.541 19.5139C19.541 19.7791 19.4357 20.0335 19.2481 20.221C19.0606 20.4086 18.8062 20.5139 18.541 20.5139H5.54102C5.2758 20.5139 5.02145 20.6193 4.83391 20.8068C4.64637 20.9944 4.54102 21.2487 4.54102 21.5139C4.54102 21.7791 4.64637 22.0335 4.83391 22.221C5.02145 22.4086 5.2758 22.5139 5.54102 22.5139H6.72102C6.55655 22.9671 6.5037 23.4531 6.56695 23.931C6.63019 24.4089 6.80766 24.8645 7.08433 25.2593C7.36101 25.654 7.72873 25.9763 8.15637 26.1988C8.58401 26.4213 9.05896 26.5374 9.54102 26.5374C10.0231 26.5374 10.498 26.4213 10.9257 26.1988C11.3533 25.9763 11.721 25.654 11.9977 25.2593C12.2744 24.8645 12.4518 24.4089 12.5151 23.931C12.5783 23.4531 12.5255 22.9671 12.361 22.5139H14.721C14.5713 22.9265 14.5139 23.367 14.553 23.8041C14.5921 24.2413 14.7266 24.6646 14.9471 25.0442C15.1675 25.4237 15.4686 25.7502 15.8291 26.0007C16.1895 26.2512 16.6005 26.4195 17.0331 26.4939C17.4657 26.5682 17.9093 26.5467 18.3327 26.4309C18.7561 26.3151 19.1489 26.1078 19.4834 25.8236C19.8179 25.5394 20.086 25.1853 20.2687 24.7862C20.4515 24.3872 20.5444 23.9528 20.541 23.5139C20.5392 22.9973 20.4012 22.4903 20.141 22.0439C20.5686 21.7743 20.9212 21.401 21.1659 20.9587C21.4107 20.5164 21.5397 20.0194 21.541 19.5139ZM17.631 16.5139H9.04102L7.38102 10.5139H19.241L17.631 16.5139ZM9.54102 24.5139C9.34323 24.5139 9.14989 24.4553 8.98545 24.3454C8.821 24.2355 8.69282 24.0793 8.61714 23.8966C8.54145 23.7139 8.52165 23.5128 8.56023 23.3188C8.59882 23.1249 8.69406 22.9467 8.83391 22.8068C8.97376 22.667 9.15194 22.5717 9.34593 22.5331C9.53991 22.4946 9.74097 22.5144 9.9237 22.59C10.1064 22.6657 10.2626 22.7939 10.3725 22.9584C10.4824 23.1228 10.541 23.3161 10.541 23.5139C10.541 23.7791 10.4357 24.0335 10.2481 24.221C10.0606 24.4086 9.80623 24.5139 9.54102 24.5139ZM17.541 24.5139C17.3432 24.5139 17.1499 24.4553 16.9854 24.3454C16.821 24.2355 16.6928 24.0793 16.6171 23.8966C16.5414 23.7139 16.5216 23.5128 16.5602 23.3188C16.5988 23.1249 16.6941 22.9467 16.8339 22.8068C16.9738 22.667 17.1519 22.5717 17.3459 22.5331C17.5399 22.4946 17.741 22.5144 17.9237 22.59C18.1064 22.6657 18.2626 22.7939 18.3725 22.9584C18.4824 23.1228 18.541 23.3161 18.541 23.5139C18.541 23.7791 18.4357 24.0335 18.2481 24.221C18.0606 24.4086 17.8062 24.5139 17.541 24.5139Z"/>
                        <path d="M22.8523 9.96459H25.23V6.45118H28.7434V4.07348H25.23V0.560059H22.8523V4.07348H19.3389V6.45118H22.8523V9.96459Z"/>
                    </svg>
                </div>
            }
        </div>
    );
};

export default ProductCard;